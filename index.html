<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁªÜËÉûÈó¥ - È¢ÑÁ∫¶Á≥ªÁªü</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #c7d2fe 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 800px; margin: 0 auto; }
        h1 {
            text-align: center;
            color: #312e81;
            margin-bottom: 30px;
            font-size: 28px;
        }
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 24px;
            margin-bottom: 20px;
        }
        h2 { color: #1f2937; margin-bottom: 20px; font-size: 20px; }
        .form-group { margin-bottom: 20px; }
        label {
            display: block;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .desk-buttons {
            display: flex;
            gap: 16px;
        }
        .desk-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
        }
        .desk-btn:hover { border-color: #818cf8; }
        .desk-btn.active {
            border-color: #4f46e5;
            background: #eef2ff;
            color: #4f46e5;
        }
        input, select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        .submit-btn {
            width: 100%;
            padding: 12px;
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        .submit-btn:hover { background: #4338ca; }
        .message {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .message.success { background: #d1fae5; color: #065f46; }
        .message.error { background: #fee2e2; color: #991b1b; }
        .booking-item {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .booking-item:hover { background: #f9fafb; }
        .booking-info .desk { font-weight: 600; color: #4f46e5; font-size: 18px; }
        .booking-info .details {
            color: #6b7280;
            font-size: 14px;
            margin-top: 4px;
        }
        .cancel-btn {
            padding: 8px 16px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .cancel-btn:hover { background: #dc2626; }
        .empty-state {
            text-align: center;
            color: #9ca3af;
            padding: 40px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ÁªÜËÉûÈó¥ - È¢ÑÁ∫¶Á≥ªÁªü</h1>
        
        <div class="card">
            <h2>Êñ∞Âª∫È¢ÑÁ∫¶</h2>
            <div id="message"></div>
            
            <div class="form-group">
                <label>ÈÄâÊã©Ê°åÂ≠ê</label>
                <div class="desk-buttons">
                    <button class="desk-btn" onclick="selectDesk('Â∑¶Ê°åÂ≠ê')">Â∑¶Ê°åÂ≠ê</button>
                    <button class="desk-btn" onclick="selectDesk('Âè≥Ê°åÂ≠ê')">Âè≥Ê°åÂ≠ê</button>
                </div>
            </div>

            <div class="form-group">
                <label>È¢ÑÁ∫¶Êó•Êúü</label>
                <input type="date" id="date" min="">
            </div>

            <div class="form-group">
                <label>Êó∂Èó¥ÊÆµ</label>
                <select id="time">
                   <option value="">ËØ∑ÈÄâÊã©Êó∂Èó¥ÊÆµ</option>
                    <option value="08:00-09:00">08:00-09:00</option>
                    <option value="09:00-10:00">09:00-10:00</option>
                    <option value="10:00-11:00">10:00-11:00</option>
                    <option value="11:00-12:00">11:00-12:00</option>
                    <option value="12:00-13:00">12:00-13:00</option>
                    <option value="13:00-14:00">13:00-14:00</option>
                    <option value="14:00-15:00">14:00-15:00</option>
                    <option value="15:00-16:00">15:00-16:00</option>
                    <option value="16:00-17:00">16:00-17:00</option>
                    <option value="17:00-18:00">17:00-18:00</option>
                    <option value="18:00-19:00">18:00-19:00</option>
                    <option value="19:00-20:00">19:00-20:00</option>
                    <option value="20:00-21:00">20:00-21:00</option>
                    <option value="21:00-22:00">21:00-22:00</option>
                    <option value="22:00-23:00">22:00-23:00</option>
                    <option value="23:00-24:00">23:00-24:00</option>
                </select>
            </div>

            <div class="form-group">
                <label>È¢ÑÁ∫¶‰∫∫ÂßìÂêç</label>
                <input type="text" id="userName" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÂßìÂêç">
            </div>

            <button class="submit-btn" onclick="submitBooking()">Êèê‰∫§È¢ÑÁ∫¶</button>
        </div>

        <div class="card">
            <h2>ÂΩìÂâçÈ¢ÑÁ∫¶</h2>
            <div id="bookingList"></div>
        </div>
    </div>

    <script>
        let selectedDesk = '';
        let bookings = JSON.parse(localStorage.getItem('roomBookings') || '[]');

        // ËÆæÁΩÆÊúÄÂ∞èÊó•Êúü‰∏∫‰ªäÂ§©
        document.getElementById('date').min = new Date().toISOString().split('T')[0];

        function selectDesk(desk) {
            selectedDesk = desk;
            document.querySelectorAll('.desk-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === desk);
            });
        }

        function showMessage(text, type) {
            const msgDiv = document.getElementById('message');
            msgDiv.innerHTML = `<div class="message ${type}">${text}</div>`;
            setTimeout(() => msgDiv.innerHTML = '', 3000);
        }

        function submitBooking() {
            const date = document.getElementById('date').value;
            const time = document.getElementById('time').value;
            const userName = document.getElementById('userName').value;

            if (!selectedDesk || !date || !time || !userName) {
                showMessage('ËØ∑Â°´ÂÜôÊâÄÊúâ‰ø°ÊÅØ', 'error');
                return;
            }

            const isBooked = bookings.some(
                b => b.desk === selectedDesk && b.date === date && b.time === time
            );

            if (isBooked) {
                showMessage('ËØ•Êó∂ÊÆµÂ∑≤Ë¢´È¢ÑÁ∫¶ÔºåËØ∑ÈÄâÊã©ÂÖ∂‰ªñÊó∂ÊÆµ', 'error');
                return;
            }

            const newBooking = {
                id: Date.now(),
                desk: selectedDesk,
                date: date,
                time: time,
                userName: userName
            };

            bookings.push(newBooking);
            localStorage.setItem('roomBookings', JSON.stringify(bookings));
            
            showMessage('È¢ÑÁ∫¶ÊàêÂäüÔºÅ', 'success');
            
            // Ê∏ÖÁ©∫Ë°®Âçï
            selectedDesk = '';
            document.querySelectorAll('.desk-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('date').value = '';
            document.getElementById('time').value = '';
            document.getElementById('userName').value = '';
            
            renderBookings();
        }

        function cancelBooking(id) {
            bookings = bookings.filter(b => b.id !== id);
            localStorage.setItem('roomBookings', JSON.stringify(bookings));
            showMessage('Â∑≤ÂèñÊ∂àÈ¢ÑÁ∫¶', 'success');
            renderBookings();
        }

        function renderBookings() {
            const listDiv = document.getElementById('bookingList');
            
            if (bookings.length === 0) {
                listDiv.innerHTML = '<div class="empty-state">ÊöÇÊó†È¢ÑÁ∫¶ËÆ∞ÂΩï</div>';
                return;
            }

            bookings.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            listDiv.innerHTML = bookings.map(booking => `
                <div class="booking-item">
                    <div class="booking-info">
                        <div class="desk">${booking.desk}</div>
                        <div class="details">
                            üìÖ ${booking.date} ‚è∞ ${booking.time}<br>
                            üë§ È¢ÑÁ∫¶‰∫∫: ${booking.userName}
                        </div>
                    </div>
                    <button class="cancel-btn" onclick="cancelBooking(${booking.id})">ÂèñÊ∂à</button>
                </div>
            `).join('');
        }

        // ÂàùÂßãÂåñ
        renderBookings();
    </script>
</body>
</html>
